(this["webpackJsonporder-with-me"]=this["webpackJsonporder-with-me"]||[]).push([[0],{46:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t),n.d(t,"categories",(function(){return c}));var c=[{name:"Meat",imgUrl:"./img/meat.jpg"},{name:"Soup",imgUrl:"./img/soup.jpg"},{name:"Sides",imgUrl:"./img/sides.jpg"},{name:"Dessert",imgUrl:"./img/dessert.jpeg"},{name:"Drinks",imgUrl:"./img/drinks."}]},56:function(e,t,n){"use strict";n.r(t);var c=n(4),a=n.n(c),r=n(35),i=n.n(r),o=n(12),s=n(6),l=n(16),u=n(9),j=n(36),d=Object({NODE_ENV:"production",PUBLIC_URL:"/order-with-me",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API:"AIzaSyBLTan2KI4dsEV8C0xo0UTtCacBjyNdvHg",REACT_APP_FIREBASE_AUTHDOMAIN:"order-with-me.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://order-with-me-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECTID:"order-with-me",REACT_APP_FIREBASE_STORAGEBUCKET:"order-with-me.appspot.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"679599040721",REACT_APP_FIREBASE_APPID:"1:679599040721:web:ac37f3cda188977820bdf0"}),b={apiKey:d.REACT_APP_FIREBASE_API,authDomain:d.REACT_APP_FIREBASE_AUTHDOMAIN,databaseURL:d.REACT_APP_FIREBASE_DATABASE_URL,projectId:d.REACT_APP_FIREBASE_PROJECTID,storageBucket:d.REACT_APP_FIREBASE_STORAGEBUCKET,messagingSenderId:d.REACT_APP_FIREBASE_MESSAGINGSENDERID,appId:d.REACT_APP_FIREBASE_APPID},O=Object(j.a)(b),f=n(10),m=(n(46),n(1));var v=function(e){return Object(m.jsx)(l.b,{to:e.link,children:Object(m.jsx)("li",{children:e.text})})};var h=function(){return Object(m.jsx)("nav",{children:Object(m.jsxs)("ul",{children:[Object(m.jsx)(v,{link:"/table",text:"Table"}),Object(m.jsx)(v,{link:"/menu",text:"Menu"}),Object(m.jsx)(v,{link:"/cart",text:"Cart"}),Object(m.jsx)(v,{link:"/orders",text:"Orders"})]})})},g=n(15);var p=function(){return Object(m.jsx)("div",{className:"card",children:Object(m.jsxs)("div",{className:"loader",children:[Object(m.jsx)("div",{className:"spin"}),Object(m.jsx)("div",{className:"bounce"})]})})};function x(e){var t=e.orders,n=e.loading,r=e.loadingOrder,i=e.validSession,l=(e.pendingOrders,Object(c.useState)(0)),u=Object(s.a)(l,2),j=u[0],d=u[1],b=a.a.useState([]),O=Object(s.a)(b,2),f=O[0],v=O[1];return Object(c.useEffect)((function(){function e(){var e=Math.floor(Date.now()/1e3);d(e)}e();var t=setInterval((function(){return e()}),1e3);return function(){clearInterval(t)}}),[]),Object(c.useEffect)((function(){var e=[];try{null!==t&&0!==t.length&&Object.keys(t).map((function(n){t[n].forEach((function(t){var n=t.id,c=t.quantity,a=t.name;if(!0===t.pending){var r=e.filter((function(e){return e.id===n}));e=0===r.length?[].concat(Object(g.a)(e),[{id:n,quantity:c,name:a}]):e.map((function(e){return e.id===n?Object(o.a)(Object(o.a)({},e),{},{quantity:e.quantity+c}):e})),v(e)}}))}))}catch(n){console.error(n)}}),[t]),i?n||r||0===j?Object(m.jsx)(p,{}):null===t?Object(m.jsx)("div",{children:"You currently have no pending orders!"}):Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:"Orders: "}),Object.keys(t).map((function(e){return t[e].map((function(e,t){return e.pending?Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:e.name}),Object(m.jsx)("div",{children:e.quantity}),Object(m.jsx)("div",{children:S(j,e.orderedAt)}),Object(m.jsx)("div",{children:"__________________"})]},t):null}))})),f.map((function(e,t){return Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{children:e.quantity}),Object(m.jsxs)("span",{children:[" - ",e.name]})]},t)}))]}):Object(m.jsx)("div",{children:"Enter a table to get started!"})}function S(e,t){var n=e-t;if(n>=6e3)return"99:99";var c=Math.floor(n/60).toString(10),a=n%60,r=a.toString(10);return a<10&&(r="0".concat(a)),c+":"+r}var E=function(e){var t=e.label,n=e.validSession,a=e.setValidSession,r=e.globalTableId,i=e.setGlobalTableId,o=Object(c.useState)(""),l=Object(s.a)(o,2),u=l[0],j=l[1],d=Object(c.useState)(!0),b=Object(s.a)(d,2),O=b[0],f=b[1];Object(c.useEffect)((function(){/^[a-zA-Z0-9]{4}$/.test(u)?f(!1):f(!0)}),[u]);var v="Current Table: "+r;return Object(m.jsxs)("form",{children:[Object(m.jsx)("label",{children:n?v:t}),Object(m.jsx)("input",{type:"text",minLength:4,maxLength:4,onChange:function(e){j(e.currentTarget.value)},value:u}),Object(m.jsx)("button",{onClick:function(e){e.preventDefault();var t=u;/^[a-zA-Z0-9]{4}$/.test(t)?(a(!0),localStorage.setItem("tableId",t),localStorage.setItem("sessionTimeStamp",Date.now().toString(10)),i(u)):console.log("incorrect table id")},disabled:O,children:n?"Change Table":"Join Table"})]})},A=n(55).categories;var _=function(){return Object(m.jsx)("div",{className:"menu-grid",children:A.map((function(e,t){return Object(m.jsx)("div",{className:"grid-item",style:{backgroundImage:"url(".concat(e.imgUrl,")")},children:Object(m.jsx)(l.b,{to:"/menu/".concat(e.name.toLowerCase()),children:e.name},t)})}))})};var I=function(e){var t=e.setGlobalTableId,n=e.validSession,c=e.setValidSession;return e.loading?Object(m.jsx)("div",{children:"Loading...."}):Object(m.jsx)("div",{children:n?Object(m.jsx)(_,{}):Object(m.jsx)(E,{label:"Enter your 4 Digit Table ID to get Started!",setValidSession:c,setGlobalTableId:t})})},y=[{category:"Meat",name:"A5 Wagyuu",id:"10",alt:"A5 juicy wagyuu beef",imgUrl:"#",price:"$123.00"},{category:"Meat",name:"Pork Belly",id:"11",imgUrl:"#",price:"$10.00"},{category:"Meat",name:"Beef tongue",id:"12",imgUrl:"#",price:"$12.00"}].concat([{category:"Soup",name:"Spicy Soup Base",id:"51",imgUrl:"#",price:"$16.00"},{category:"Soup",name:"Chicken Broth Soup Base",id:"52",imgUrl:"#",price:"$15.00"}],[{category:"Drinks",name:"Coke",id:"101",imgUrl:"#",price:"$2.50"}]);var T=function(e){var t=e.match.params.category,n=y.filter((function(e){return e.category.toLowerCase()===t.toLowerCase()}));return Object(m.jsxs)("div",{children:[Object(m.jsx)(l.b,{to:"/",children:Object(m.jsx)("button",{children:"Back"})}),n.map((function(e,n){return Object(m.jsx)(l.b,{to:"/menu/".concat(t,"/").concat(e.id),children:e.name},n)}))]})};var C=function(){var e=Object(c.useState)(!0),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(null),o=Object(s.a)(i,2),l=o[0],u=o[1],j=a.a.useState([]),d=Object(s.a)(j,2),b=d[0],v=d[1],h=Object(c.useState)(0),p=Object(s.a)(h,2),x=p[0],E=p[1];function A(e){try{var t=e.target.getAttribute("data-key"),n=t.slice(0,4),c=t.slice(4,24),a=t.slice(24,t.length),r=Object(f.b)(O);if(null!=l){var i=l[n].orders[c],o=i.filter((function(e){return e.id===a}))[0],s=i.indexOf(o);Object(f.g)(Object(f.e)(r,"tables/".concat(n,"/orders/").concat(c,"/").concat(s)),{pending:!1})}}catch(u){console.error(u)}}return Object(c.useEffect)((function(){function e(){var e=Math.floor(Date.now()/1e3);E(e)}e();var t=setInterval((function(){return e()}),1e3),n=Object(f.b)(O),c=Object(f.e)(n,"tables/");return Object(f.c)(c,(function(e){var t=e.val();console.log(t),null===t&&r(!1),u(t)})),function(){clearInterval(t)}}),[]),Object(c.useEffect)((function(){if(null!=l){r(!1);var e=[];Object.keys(l).map((function(t){var n=l[t].orders;Object.keys(n).map((function(c){n[c].forEach((function(n){n.pending&&(n.tableId=t,n.uid=t+c+n.id,e=null===e?[n]:[].concat(Object(g.a)(e),[n]))}))}))})),v(e),console.log(e)}}),[l]),n||0===x?Object(m.jsx)("div",{children:"Loading..."}):Object(m.jsx)("div",{children:b.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{children:e.name}),Object(m.jsxs)("span",{children:[" ---- ",e.quantity]}),Object(m.jsxs)("span",{children:[" ---- ",e.tableId]}),Object(m.jsxs)("span",{children:[" ---- ",S(x,e.orderedAt)]}),Object(m.jsx)("button",{onClick:A,"data-key":e.uid,children:"Completed"})]},e.uid)}))})};function R(e){var t=e.match.params,n=t.id,a=t.category,r=e.cart,i=e.setCart,u=Object(c.useState)(0),j=Object(s.a)(u,2),d=j[0],b=j[1];function O(e){if("plus"===e)b(d+1);else{if("minus"===e&&d<=0)return;"minus"===e&&b(d-1)}}var f=function(e){var t=y.filter((function(t){return t.id===e}));return 0===t.length?(console.log("cannot find item"),null):t.length>1?(console.log("duplicate items"),null):t[0]}(n);return null===f?null:Object(m.jsxs)("div",{children:[Object(m.jsx)(l.b,{to:"/menu/".concat(a),children:Object(m.jsx)("button",{children:"Back"})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:null===f?null:f.name}),Object(m.jsx)("div",{children:null===f?null:f.price}),Object(m.jsx)("button",{onClick:function(){return O("minus")},children:"-"}),Object(m.jsxs)("span",{children:["Quantity: ",d]}),Object(m.jsx)("button",{onClick:function(){return O("plus")},children:"+"}),Object(m.jsx)("button",{onClick:function(){if(0!==d){var e=r.filter((function(e){return e.id===n}));if(e.length>0){var t=e[0].quantity+d;i(Object(g.a)(r).map((function(e){return e.id===n?Object(o.a)(Object(o.a)({},e),{},{quantity:t,name:f.name,price:f.price}):e})))}else i(r.concat({id:n,quantity:d,name:f.name,price:f.price}))}},disabled:0===d,children:"Add to cart"})]})]})}function P(e){var t=e.cart,n=e.setCart,a=e.validSession,r=e.globalTableId,i=Object(c.useState)(""),l=Object(s.a)(i,2),u=l[0],j=l[1];function d(e,c){var a=t.filter((function(e){return e.id===c}))[0].quantity;a<=1&&"minus"===e||("plus"===e?a++:"minus"===e&&a--,n(Object(g.a)(t).map((function(e){return e.id===c?Object(o.a)(Object(o.a)({},e),{},{quantity:a}):e}))))}return Object(c.useEffect)((function(){var e=t.reduce((function(e,t){return e+k(t.price)*t.quantity}),0);j(B(e))}),[t]),Object(m.jsxs)("div",{children:[t.map((function(e,c){var a=k(e.price);return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:e.name}),Object(m.jsx)("div",{children:e.price}),Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{onClick:function(){return d("minus",e.id)},disabled:1===e.quantity,children:"-"}),Object(m.jsxs)("div",{children:["Quantity: ",e.quantity]}),Object(m.jsx)("button",{onClick:function(){return d("plus",e.id)},children:"+"})]}),Object(m.jsx)("button",{onClick:function(){return function(e){var c=Object(g.a)(t);c=c.filter((function(t){return t.id!==e})),n(c)}(e.id)},children:"Remove Item"}),Object(m.jsx)("div",{children:B(a*e.quantity)})]},c)})),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:["Total: ",u]}),Object(m.jsxs)("div",{children:["Table: ",r]}),Object(m.jsx)("button",{onClick:function(){if(a){var e=Math.floor(Date.now()/1e3),c=Object(g.a)(t);c=c.map((function(t){return Object(o.a)(Object(o.a)({},t),{},{pending:!0,orderedAt:e})})),console.log(c),function(e){var t=Object(f.b)(O),n=Object(f.d)(Object(f.a)(Object(f.e)(t),"tables/tableId/orders/")).key;Object(f.f)(Object(f.e)(t,"tables/".concat(r,"/orders/").concat(n)),e)}(c),n([])}},disabled:!a,children:"Order"}),a?null:Object(m.jsx)("div",{children:"Enter a table before ordering!"})]})]})}function k(e){"$"===e.charAt(0)&&(e=e.slice(1));var t=-1;if(e.includes(".")){t=e.indexOf(".");var n=parseInt(e.slice(0,t),10),c=e.slice(t+1),a=null;return 1===c.length?100*n+10*(a=parseInt(e.slice(t+1),10)):(2===c.length&&(a=parseInt(e.slice(t+1),10)),100*n+a)}return 100*parseInt(e,10)}function B(e){if(!1===Number.isInteger(e))return"";var t=e%100,n=t.toString(10);t<10&&(n="0".concat(t));var c=Math.floor(e/100);return"$".concat(c,".").concat(n)}var D=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(!0),j=Object(s.a)(i,2),d=j[0],b=j[1],v=Object(c.useState)(!0),g=Object(s.a)(v,2),p=g[0],S=g[1],A=Object(c.useState)(null),y=Object(s.a)(A,2),k=y[0],B=y[1],D=a.a.useState([]),U=Object(s.a)(D,2),N=U[0],w=U[1],q=a.a.useState([]),F=Object(s.a)(q,2),M=(F[0],F[1]),L=Object(c.useState)([]),G=Object(s.a)(L,2),$=G[0],J=G[1],K=Object(c.useState)(!1),V=Object(s.a)(K,2),H=V[0],W=V[1];return Object(c.useEffect)((function(){!function(){var e=localStorage.getItem("sessionTimeStamp");if(null===e)localStorage.clear();else if(Date.now()-parseInt(e)<36e5){W(!0);var t=localStorage.getItem("tableId");null!=t&&r(t);var n=localStorage.getItem("cart");null!=n&&J(JSON.parse(n))}b(!1)}()}),[]),Object(c.useEffect)((function(){var e=JSON.stringify($);localStorage.setItem("cart",e)}),[$]),Object(c.useEffect)((function(){if(!0===H&&""!==n){var e=Object(f.b)(O),t=Object(f.e)(e,"tables/".concat(n,"/orders"));Object(f.c)(t,(function(e){var t=e.val();B(t),null===t&&S(!1)}))}}),[H,n]),Object(c.useEffect)((function(){if(null!=k){S(!1);var e=[],t=[];Object.keys(k).map((function(n){var c=k[n],a=c.filter((function(e){return!0===e.pending}));e=e.concat(a);var r=c.filter((function(e){return!1===e.pending}));t=t.concat(r)})),w(e),console.log("pending"),console.table(e),M(t),console.log("past"),console.table(t)}}),[k]),Object(m.jsx)("div",{className:"app",children:Object(m.jsxs)(l.a,{basename:"/",children:[Object(m.jsx)(h,{}),Object(m.jsx)("div",{className:"main-content",children:Object(m.jsxs)(u.c,{children:[Object(m.jsx)(u.a,{exact:!0,path:"/",component:function(){return Object(m.jsx)(I,{setGlobalTableId:r,validSession:H,setValidSession:W,loading:d})}}),Object(m.jsx)(u.a,{path:"/menu/:category/:id",component:function(e){return Object(m.jsx)(R,Object(o.a)(Object(o.a)({},e),{},{cart:$,setCart:J}))}}),Object(m.jsx)(u.a,{path:"/menu/:category",component:T}),Object(m.jsx)(u.a,{path:"/menu",component:_}),Object(m.jsx)(u.a,{path:"/table",component:function(){return Object(m.jsx)(E,{label:"Enter your 4 Digit Table ID to get Started!",validSession:H,setValidSession:W,globalTableId:n,setGlobalTableId:r})}}),Object(m.jsx)(u.a,{exact:!0,path:"/cart",component:function(){return Object(m.jsx)(P,{cart:$,setCart:J,validSession:H,globalTableId:n})}}),Object(m.jsx)(u.a,{exact:!0,path:"/orders",component:function(){return Object(m.jsx)(x,{orders:k,loading:d,loadingOrder:p,pendingOrders:N,validSession:H})}}),Object(m.jsx)(u.a,{exact:!0,path:"/kitchen",component:C})]})})]})})};i.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(D,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.e5c2532d.chunk.js.map